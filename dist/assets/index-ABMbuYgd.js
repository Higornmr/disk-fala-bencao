import{_ as T,c as v,a as o,w as E,b as h,v as w,d as p,t as g,e as M,r as L,f as d,o as O,g as b}from"./index-KiH7DNsC.js";const B="/assets/logo-DMEMN1Ln.png",C={setup(){const i=L({nome:"",cidade:""}),a=d(!1),s=d(""),e=d(""),c=d(0),l=d(null),t=d([]),u=d(null),f=d(!0),R=async()=>{try{const r=await navigator.mediaDevices.getUserMedia({audio:!0});l.value=new MediaRecorder(r),t.value=[],c.value=0,e.value="",l.value.ondataavailable=n=>{t.value.push(n.data)},l.value.onstop=()=>{const n=new Blob(t.value,{type:"audio/wav"});s.value=URL.createObjectURL(n),r.getTracks().forEach(m=>m.stop())},l.value.start(),a.value=!0,f.value=!1,u.value=setInterval(()=>{c.value++,c.value>=30&&_()},1e3)}catch(r){e.value="Erro ao acessar microfone. Verifique as permiss√µes.",console.error("Erro ao iniciar grava√ß√£o:",r)}},_=()=>{l.value&&a.value&&(l.value.stop(),a.value=!1,f.value=!0,u.value&&(clearInterval(u.value),u.value=null))},y=()=>{s.value&&(URL.revokeObjectURL(s.value),s.value=""),t.value=[],c.value=0,e.value=""},D=r=>{const n=Math.floor(r/60),m=r%60;return`${n.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`},k=async()=>{if(!i.nome||!i.cidade||!s.value){e.value="Por favor, preencha todos os campos e grave um √°udio.";return}try{e.value="Enviando...";const n=await(await fetch(s.value)).blob();await U(n,i.nome,i.cidade),alert("Formul√°rio enviado com sucesso!"),i.nome="",i.cidade="",y(),e.value=""}catch(r){console.error("Erro ao enviar:",r),e.value="Erro ao enviar. Tente novamente."}},U=async(r,n,m)=>{const S="https://discord.com/api/webhooks/1389744320797737040/KSZch0_e54Qij-fI51IVzFW-WdbPML3UlCEQd5DWNHX6O_Fb8gOPvpOnk4PebFY8Z84d",x=new FormData;if(x.append("file",r,`${n}_${m}_audio.wav`),x.append("content",`üé§ **Nova Grava√ß√£o Recebida!**

üë§ **Nome:** ${n}
üèôÔ∏è **Cidade:** ${m}
‚è∞ **Data:** ${new Date().toLocaleString("pt-BR")}`),!(await fetch(S,{method:"POST",body:x})).ok)throw new Error("Falha ao enviar para Discord")};return O(()=>{u.value&&clearInterval(u.value),s.value&&URL.revokeObjectURL(s.value)}),{formData:i,isRecording:a,audioUrl:s,errorMessage:e,recordingTime:c,canRecord:f,startRecording:R,stopRecording:_,deleteRecording:y,formatTime:D,handleSubmit:k}}},F={class:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-8 gap-10 flex flex-col justify-center items-center"},N=o("div",{class:"flex justify-center items-center rounded-full w-full"},[o("img",{src:B,alt:"logo",class:"w-[200px] h-[200px] rounded-full"})],-1),I={class:"max-w-[600px] w-full mx-auto bg-white rounded-lg shadow-lg p-6"},P=o("h1",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"}," Formul√°rio de Grava√ß√£o ",-1),V=o("h2",{class:"text-lg font-bold text-gray-800 mb-6 text-center"}," Programa Fala Ben√ß√£o ",-1),j=o("label",{for:"nome",class:"block text-sm font-medium text-gray-700 mb-2"}," Nome ",-1),G=o("label",{for:"cidade",class:"block text-sm font-medium text-gray-700 mb-2"}," Cidade ",-1),W=o("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Grava√ß√£o de √Åudio (m√°ximo 30 segundos) ",-1),q={class:"space-y-3"},H={class:"flex space-x-3"},K=["disabled"],Q=["disabled"],Z={key:0,class:"text-center"},z={class:"text-lg font-semibold text-red-600"},X={class:"text-sm text-gray-500"},Y={key:1,class:"space-y-2"},A=o("div",{class:"text-sm text-gray-600"},"√Åudio gravado:",-1),J={controls:"",class:"w-full"},$=["src"],ee={key:2,class:"text-red-600 text-sm"},oe=["disabled"];function ae(i,a,s,e,c,l){return b(),v("div",F,[N,o("div",I,[P,V,o("form",{onSubmit:a[5]||(a[5]=E((...t)=>e.handleSubmit&&e.handleSubmit(...t),["prevent"])),class:"space-y-6"},[o("div",null,[j,h(o("input",{id:"nome","onUpdate:modelValue":a[0]||(a[0]=t=>e.formData.nome=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite seu nome"},null,512),[[w,e.formData.nome]])]),o("div",null,[G,h(o("input",{id:"cidade","onUpdate:modelValue":a[1]||(a[1]=t=>e.formData.cidade=t),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Digite sua cidade"},null,512),[[w,e.formData.cidade]])]),o("div",null,[W,o("div",q,[o("div",H,[o("button",{type:"button",onClick:a[2]||(a[2]=(...t)=>e.startRecording&&e.startRecording(...t)),disabled:e.isRecording||!e.canRecord,class:"flex-1 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white py-2 px-4 rounded-md transition-colors"},g(e.isRecording?"Gravando...":"Iniciar Grava√ß√£o"),9,K),o("button",{type:"button",onClick:a[3]||(a[3]=(...t)=>e.stopRecording&&e.stopRecording(...t)),disabled:!e.isRecording,class:"flex-1 bg-gray-500 hover:bg-gray-600 disabled:bg-gray-300 text-white py-2 px-4 rounded-md transition-colors"}," Parar ",8,Q)]),e.isRecording?(b(),v("div",Z,[o("div",z,g(e.formatTime(e.recordingTime)),1),o("div",X," Tempo restante: "+g(e.formatTime(30-e.recordingTime)),1)])):p("",!0),e.audioUrl?(b(),v("div",Y,[A,o("audio",J,[o("source",{src:e.audioUrl,type:"audio/wav"},null,8,$),M(" Seu navegador n√£o suporta o elemento de √°udio. ")]),o("button",{type:"button",onClick:a[4]||(a[4]=(...t)=>e.deleteRecording&&e.deleteRecording(...t)),class:"w-full bg-gray-200 hover:bg-gray-300 text-gray-700 py-2 px-4 rounded-md transition-colors"}," Deletar Grava√ß√£o ")])):p("",!0),e.errorMessage?(b(),v("div",ee,g(e.errorMessage),1)):p("",!0)])]),o("button",{type:"submit",disabled:!e.formData.nome||!e.formData.cidade||!e.audioUrl,class:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-gray-400 text-white py-3 px-4 rounded-md font-medium transition-colors"}," Enviar Formul√°rio ",8,oe)],32)])])}const se=T(C,[["render",ae]]);export{se as default};
